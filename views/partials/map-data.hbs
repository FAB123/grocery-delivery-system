<script type="text/javascript" src='https://maps.google.com/maps/api/js?sensor=false&libraries=places'></script>
<script src="/assets/js/locationpicker.jquery.min.js"></script>
<script>
    function getLocation() {
        return new Promise((resolve, reject) => {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    resolve(position.coords)
                });
            } else {
                resolve({ 'latitude': '1', 'longitude': '1' })
            }
        })
    }
    getLocation().then((response) => {
        $('#us3').locationpicker({
            location: {
                latitude: response.latitude,
                longitude: response.longitude
            },
            radius: 300,
            inputBinding: {
                latitudeInput: $('#us3-lat'),
                longitudeInput: $('#us3-lon'),
                radiusInput: $('#us3-radius')
            },
            enableAutocomplete: true,
            onchanged: function (currentLocation, radius, isMarkerDropped) {
                // alert("Location changed. New location (" + currentLocation.latitude + ", " + currentLocation.longitude + ")");
            }
        });
    })
</script>